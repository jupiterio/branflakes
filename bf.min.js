var bf=function(e,r,a){for(var i=0,o=[0],t="",s=0,r=r||100,c=0;c<e.length;c++){var f=e[c];switch(f){case">":i++;break;case"<":i--;break;case"+":o[i]=void 0==o[i]?1:o[i]+1;break;case"-":o[i]=void 0==o[i]?-1:o[i]-1;break;case".":t+=String.fromCharCode(o[i]||0);break;case",":o[i]=(a||function(){throw"Not implemented"})(o,i).charCodeAt(0)||0;break;case"[":for(var n=[1],b=c+1;b<e.length;b++)if("["==e[b]&&n[0]++,"]"==e[b]&&n[0]--,0==n[0]){n[1]=b;break}if(n[0]>0)throw"Missing "+n[0]+" ]s";0==o[i]&&(c=n[1]);break;case"]":for(var n=[1],b=c-1;b>-1;b--)if("]"==e[b]&&n[0]++,"["==e[b]&&n[0]--,0==n[0]){n[1]=b;break}if(n[0]>0)throw"Missing "+n[0]+" [s";if(s>r)throw"Exceeded max loop repetition";if(0!=o[i]){c=n[1],s++;break}s=0}}return t};